# modules/auto_react.py

from pyrogram import Client, filters
from pyrogram.types import Message
import random
import re

# Keyword-based emoji reactions
REACTIONS = {
    r"\bhello\b": ["ğŸ‘‹", "ğŸ˜Š"],
    r"\bhi\b": ["ğŸ‘‹"],
    r"\bthanks\b|\bthank you\b": ["ğŸ™", "ğŸ˜Š"],
    r"\blove\b": ["â¤ï¸", "ğŸ˜", "ğŸ˜˜"],
    r"\bbye\b": ["ğŸ‘‹", "ğŸ˜¢"],
    r"\bgood night\b": ["ğŸŒ™", "ğŸ˜´"],
    r"\bgood morning\b": ["â˜€ï¸", "ğŸŒ…"],
    r"\blol\b": ["ğŸ˜‚", "ğŸ¤£"],
    r"\bcongrats\b|\bcongratulations\b": ["ğŸ‰", "ğŸ‘"],
    r"\bomg\b": ["ğŸ˜²", "ğŸ˜®"],
    r"\bwow\b": ["ğŸ˜®", "ğŸ¤©"],
}

@Client.on_message(filters.text & ~filters.edited & ~filters.bot)
async def auto_react(_, message: Message):
    if not message.text or not message.chat or message.sender_chat:
        return  # Ignore service messages, channels, etc.

    text = message.text.lower()

    for pattern, emojis in REACTIONS.items():
        if re.search(pattern, text):
            emoji = random.choice(emojis)
            try:
                await message.react(emoji)
            except Exception:
                pass  # Ignore messages that can't be reacted to
            break  # Only one reaction per message